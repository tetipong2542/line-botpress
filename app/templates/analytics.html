{% extends "base.html" %}

{% block title %}รายงาน - จดรายรับรายจ่าย{% endblock %}

{% block content %}
<div class="mobile-container">
    <!-- Header -->
    <div class="page-header">
        <div class="header-content">
            <h1>
                <i data-lucide="bar-chart-2"></i>
                รายงาน
            </h1>
            <p class="subtitle">วิเคราะห์รายรับรายจ่าย</p>
        </div>
    </div>

    <!-- Period Selector -->
    <div class="period-selector">
        <button class="period-nav" id="prev-period">
            <i data-lucide="chevron-left"></i>
        </button>
        <div class="period-display">
            <span id="current-period">มกราคม 2026</span>
        </div>
        <button class="period-nav" id="next-period">
            <i data-lucide="chevron-right"></i>
        </button>
    </div>

    <!-- Summary Cards -->
    <div class="summary-section">
        <div class="summary-card income">
            <div class="summary-icon">
                <i data-lucide="trending-up"></i>
            </div>
            <div class="summary-content">
                <div class="summary-label">รายรับเดือนนี้</div>
                <div class="summary-amount">฿0</div>
            </div>
        </div>

        <div class="summary-card expense">
            <div class="summary-icon">
                <i data-lucide="trending-down"></i>
            </div>
            <div class="summary-content">
                <div class="summary-label">รายจ่ายเดือนนี้</div>
                <div class="summary-amount">฿350</div>
            </div>
        </div>

        <div class="summary-card balance">
            <div class="summary-icon">
                <i data-lucide="wallet"></i>
            </div>
            <div class="summary-content">
                <div class="summary-label">คงเหลือ</div>
                <div class="summary-amount">-฿350</div>
            </div>
        </div>
    </div>

    <!-- Charts Section -->
    <div class="section">
        <div class="section-header">
            <h2>
                <i data-lucide="bar-chart-2"></i>
                สัดส่วนรายจ่ายตามหมวดหมู่
            </h2>
        </div>
        <div class="chart-container" style="height: 300px;">
            <canvas id="categoryChart"></canvas>
        </div>
    </div>

    <!-- Top Categories -->
    <div class="section">
        <div class="section-header">
            <h2>
                <i data-lucide="trending-up"></i>
                หมวดหมู่ทั้งหมด
            </h2>
        </div>
        <div id="top-categories-list" class="category-stats">
            <!-- Populated by analytics.js -->
        </div>
    </div>

    <!-- Monthly Trend -->
    <div class="section">
        <div class="section-header">
            <h2>
                <i data-lucide="activity"></i>
                แนวโน้มรายเดือน
            </h2>
            <p class="section-subtitle">เปรียบเทียบรายรับรายจ่าย 6 เดือนย้อนหลัง</p>
        </div>
        <div class="chart-container" style="height: 300px;">
            <canvas id="trendsChart"></canvas>
        </div>
    </div>

    <!-- Bottom spacing -->
    <div class="footer-spacing"></div>
</div>

<!-- Sticky Footer Menu -->
{% set current_page = 'analytics' %}
{% include 'components/footer_menu.html' %}
{% endblock %}

{% block extra_js %}
<!-- Analytics JavaScript -->
<script src="{{ url_for('static', filename='js/analytics.js') }}"></script>
{% endblock %}
